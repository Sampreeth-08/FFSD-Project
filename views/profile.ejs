<%- include('partials/header') %>


    <header class="profile-header">
        <div class="profile-container">
            <div class="profile">
                <div class="profile-image">
                    <img src="<%= currentUser.profPic %> " alt="">
                </div>
                <div class="profile-user-settings">
                    <h1 class="profile-user-name">
                        <%= currentUser.username %>
                    </h1>
                    <button class="profile-btn profile-edit-btn">Edit Profile</button>
                    <button class="profile-btn profile-settings-btn" id="options_btn" aria-label="profile-settings">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div class="popup" id="popup">
                        <div class="popup-window">
                            <span class="close-popup" id="close_popup">&times;</span>
                            <a href="edit_profile">Edit profile</a>
                            <a href="camera">Create post</a>
                            <a href="logout">Logout</a>
                        </div>
                    </div>
                </div>
                <div class="profile-stats">
                    <ul>
                        <li><span class="profile-stat-count">
                                <%=post.length%>
                            </span> posts</li>
                    </ul>
                </div>
                <div class="profile-bio">
                    <p><span class="profile-real-name">
                            <%= currentUser.username %>
                        </span>
                        <%= currentUser.bio %>
                    </p>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="profile-container">
            <div class="gallery">

                <% for(var i=(post.length-1); i>=0; i--){ %> 
                    <div class="gallery-item">
                        <img src="<%= post[i].imgPath %> " class="gallery-image" alt="">
                        <div class="gallery-item-info">
                            <ul>
                                <li class="gallery-item-likes"><span class="hide-gallery"><%= post[i].likes %> </span>
                                    <i class="fas fa-heart"></i>
                                </li>
                                <li class="gallery-item-comments"><span class="hide-gallery"><%= post[i].comments.length %>  </span>
                                    <i class="fas fa-comment"></i>
                                </li>
                            </ul>
                        </div>
                    </div>
                <% } %> 
            </div>
        </div>
    </main>

    <script>


        let popupWindow = document.getElementById('popup');
        let optionsBtn = document.getElementById('options_btn');
        let closeWindow = document.getElementById('close_popup');


        optionsBtn.addEventListener("click", (e) => {
            e.preventDefault();
            popupWindow.style.display = "block";
        })

        closeWindow.addEventListener("click", (e) => {
            e.preventDefault();
            popupWindow.style.display = "none";
        })

        window.addEventListener("click", (e) => {
            if (e.target == popupWindow) {
                popupWindow.style.display = "none";
            }
        })


    </script>
    </body>

    </html>