<%- include('partials/header') %>

    <div class="camera-container">
        <div class="msg-container">
            <% if(error && error.length>0){ %>
                <div class="alert alert-danger" role="alert">
                    <%= error %>
                </div>
                <% } %>

                    <% if(success && success.length>0){ %>
                        <div class="alert alert-success" role="alert">
                            <%= success %>
                        </div>
                        <% } %>
        </div>
        <div class="camera">
            <div class="camera-image">
                <img style="width:400px; height:400px;" id="disp" src="" alt="">

                <!-- <img src="/img/4.jpg" alt=""> -->
                <form action="/index" class="camera-form" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <input type="file" id="image" name="file" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="caption" name="caption" class="form-control" placeholder="type caption..." required>
                    </div>
                    <!-- <div class="form-group">
                            <input type="text" id="hashtags" name="hashtags" class="form-control"
                                placeholder="type hashtags..." required>
                        </div> -->
                    <div class="form-group">
                        <button type="submit" id="post" name="upload_image_btn" class="upload-btn">Post</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- <script>

        const image=document.getElementById('image');
        image.addEventListener('change', (e)=>{
            console.log(e.target.files)
            //const disp=document.getElementById('disp');
            //disp.src=e.target.files[0]
        })



        const update = document.getElementById('post');
        update.addEventListener('click', function () {
            const data=new FormData()
            data.append("file", image)
            data.append("upload_preset", "celestial")
            data.append("cloud_name", "cloudcelestial")

            fetch('https://api.cloudinary.com/v1_1/celestialcloud/image/upload', {
                method: "post",
                body: data
            })
            .then(res=>res.json())
            .then(data=>{
                console.log(data);
                const url=data.url
            })
            .catch(err=>{
                console.log(err);
            })


            fetch(' /camera', {
                method: 'post',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    caption,
                    hashtags,
                    pic: url
                })
            }).then(res => {
                if (res.ok) window.location.href = 'http://localhost:3000/camera'
            }).then(response => {
                console.log(response)
            })
        })
    </script> -->
    </body>

    </html>